var rr=Object.defineProperty;var ir=(s,e,t)=>e in s?rr(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var h=(s,e,t)=>(ir(s,typeof e!="symbol"?e+"":e,t),t),Ht=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var S=(s,e,t)=>(Ht(s,e,"read from private field"),t?t.call(s):e.get(s)),b=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},P=(s,e,t,r)=>(Ht(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);var y=(s,e,t)=>(Ht(s,e,"access private method"),t);function nr(s){const e=document.createElement("template");return e.innerHTML=s,e.content.firstElementChild}function or(s){return s.nodeType===3||s.nodeType===8}var k={replace(s,e,t){let r=s.indexOf(e);if(r===-1)throw"Cant find element in children";return e.replaceWith(t),s[r]=t,s},before(s,e,t){let r=s.indexOf(e);if(r===-1)throw"Cant find element in children";return e.before(t),s.splice(r,0,t),s},append(s,e,t){return s[s.length-1],t(e),s.push(e),s},remove(s,e){if(s.indexOf(e)===-1)throw"Cant find element in children";return e.remove(),s.filter(r=>r!==e)},first(s){return this.teleportTo(s[0])},next(s,e){let t=s.indexOf(e);if(t!==-1)return this.teleportTo(this.teleportBack(s[t+1]))},teleportTo(s){return s&&(s._x_teleport?s._x_teleport:s)},teleportBack(s){return s&&(s._x_teleportBack?s._x_teleportBack:s)}},ar=()=>{};function Dt(s,e,t){let r,i,o,p,L,C,N,B,W;function E(n={}){let a=f=>f.getAttribute("key"),c=()=>{};p=n.updating||c,L=n.updated||c,C=n.removing||c,N=n.removed||c,B=n.adding||c,W=n.added||c,i=n.key||a,o=n.lookahead||!1}function M(n,a){if(A(n,a))return R(n,a);let c=!1;if(!fe(p,n,a,()=>c=!0)){if(window.Alpine&&cr(n,a),or(a)){T(n,a),L(n,a);return}c||w(n,a),L(n,a),d(Array.from(n.childNodes),Array.from(a.childNodes),f=>{n.appendChild(f)})}}function A(n,a){return n.nodeType!=a.nodeType||n.nodeName!=a.nodeName||u(n)!=u(a)}function R(n,a){if(fe(C,n))return;let c=a.cloneNode(!0);fe(B,c)||(k.replace([n],n,c),N(n),W(c))}function T(n,a){let c=a.nodeValue;n.nodeValue!==c&&(n.nodeValue=c)}function w(n,a){if(n._x_isShown&&!a._x_isShown||!n._x_isShown&&a._x_isShown)return;let c=Array.from(n.attributes),f=Array.from(a.attributes);for(let g=c.length-1;g>=0;g--){let v=c[g].name;a.hasAttribute(v)||n.removeAttribute(v)}for(let g=f.length-1;g>=0;g--){let v=f[g].name,m=f[g].value;n.getAttribute(v)!==m&&n.setAttribute(v,m)}}function d(n,a,c){let f={},g={},v=k.first(a),m=k.first(n);for(;v;){let x=u(v),H=u(m);if(!m)if(x&&g[x]){let I=g[x];n=k.append(n,I,c),m=I}else{if(!fe(B,v)){let I=v.cloneNode(!0);n=k.append(n,I,c),W(I)}v=k.next(a,v);continue}let Ke=I=>I.nodeType===8&&I.textContent===" __BLOCK__ ",Xe=I=>I.nodeType===8&&I.textContent===" __ENDBLOCK__ ";if(Ke(v)&&Ke(m)){let I=[],Me,K=0;for(;m;){let V=k.next(n,m);if(Ke(V))K++;else if(Xe(V)&&K>0)K--;else if(Xe(V)&&K===0){m=k.next(n,V),Me=V;break}I.push(V),m=V}let Jt=[];for(K=0;v;){let V=k.next(a,v);if(Ke(V))K++;else if(Xe(V)&&K>0)K--;else if(Xe(V)&&K===0){v=k.next(a,V);break}Jt.push(V),v=V}d(I,Jt,V=>Me.before(V));continue}if(m.nodeType===1&&o){let I=k.next(a,v),Me=!1;for(;!Me&&I;)m.isEqualNode(I)&&(Me=!0,[n,m]=l(n,v,m),H=u(m)),I=k.next(a,I)}if(x!==H){if(!x&&H){g[H]=m,[n,m]=l(n,v,m),n=k.remove(n,g[H]),m=k.next(n,m),v=k.next(a,v);continue}if(x&&!H&&f[x]&&(n=k.replace(n,m,f[x]),m=f[x]),x&&H){let I=f[x];if(I)g[H]=m,n=k.replace(n,m,I),m=I;else{g[H]=m,[n,m]=l(n,v,m),n=k.remove(n,g[H]),m=k.next(n,m),v=k.next(a,v);continue}}}let sr=m&&k.next(n,m);M(m,v),v=v&&k.next(a,v),m=sr}let $=[];for(;m;)fe(C,m)||$.push(m),m=k.next(n,m);for(;$.length;){let x=$.shift();x.remove(),N(x)}}function u(n){return n&&n.nodeType===1&&i(n)}function l(n,a,c){if(!fe(B,a)){let f=a.cloneNode(!0);return n=k.before(n,c,f),W(f),[n,f]}return[n,a]}return E(t),r=typeof e=="string"?nr(e):e,window.Alpine&&window.Alpine.closestDataStack&&!s._x_dataStack&&(r._x_dataStack=window.Alpine.closestDataStack(s),r._x_dataStack&&window.Alpine.clone(s,r)),M(s,r),r=void 0,s}Dt.step=()=>ar();Dt.log=s=>{};function fe(s,...e){let t=!1;return s(...e,()=>t=!0),t}function cr(s,e,t){s.nodeType===1&&s._x_dataStack&&window.Alpine.clone(s,e)}document.addEventListener("turbo:before-fetch-request",async s=>{var r;s.preventDefault();const e=s.detail.fetchOptions.headers;if(s.target.tagName==="HTML"){s.detail.resume();return}const t=s.target.tagName==="turbo-frame"?s.target:s.target.closest("turbo-frame");if(!e["Turbo-Frame"]||!((r=t==null?void 0:t.dataset)!=null&&r.topwireContext)){s.detail.resume();return}e["Topwire-Context"]=t.dataset.topwireContext,s.detail.fetchOptions.headers=e,s.detail.resume()});document.addEventListener("turbo:before-frame-render",async s=>{const e=s.detail.render;s.detail.render=(t,r)=>{var o,p,L,C,N,B,W;let i=e;(o=t.dataset)!=null&&o.topwireMorph&&(i=Dt,(p=r.dataset)!=null&&p.topwireMorph||r.setAttribute("data-topwire-morph",(L=t.dataset)==null?void 0:L.topwireMorph)),i(t,r),(C=r.dataset)!=null&&C.topwirePageTitle&&(((N=t.dataset)==null?void 0:N.turboAction)==="advance"||((B=t.dataset)==null?void 0:B.turboAction)==="replace")&&(document.querySelector("title").innerText=(W=r.dataset)==null?void 0:W.topwirePageTitle)}});/*!
Turbo 8.0.13
Copyright Â© 2025 37signals LLC
 */(function(s){if(typeof s.requestSubmit=="function")return;s.requestSubmit=function(r){r?(e(r,this),r.click()):(r=document.createElement("input"),r.type="submit",r.hidden=!0,this.appendChild(r),r.click(),this.removeChild(r))};function e(r,i){r instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),r.type=="submit"||t(TypeError,"The specified element is not a submit button"),r.form==i||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}function t(r,i,o){throw new r("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+i+".",o)}})(HTMLFormElement.prototype);const ns=new WeakMap;function lr(s){const e=s instanceof Element?s:s instanceof Node?s.parentElement:null,t=e?e.closest("input, button"):null;return(t==null?void 0:t.type)=="submit"?t:null}function hr(s){const e=lr(s.target);e&&e.form&&ns.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let s=window.Event.prototype;if("SubmitEvent"in window){const e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))s=e;else return}addEventListener("click",hr,!0),Object.defineProperty(s,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return ns.get(this.target)}})})();const ae={eager:"eager",lazy:"lazy"},ot=class ot extends HTMLElement{constructor(){super();h(this,"loaded",Promise.resolve());this.delegate=new ot.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){t=="loading"?this.delegate.loadingStyleChanged():t=="src"?this.delegate.sourceURLChanged():t=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(t){t?this.setAttribute("refresh",t):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return dr(this.getAttribute("loading")||"")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,r;return(r=(t=this.ownerDocument)==null?void 0:t.documentElement)==null?void 0:r.hasAttribute("data-turbo-preview")}};h(ot,"delegateConstructor");let z=ot;function dr(s){switch(s.toLowerCase()){case"lazy":return ae.lazy;default:return ae.eager}}const ur={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function Fe(s){if(s.getAttribute("data-turbo-eval")=="false")return s;{const e=document.createElement("script"),t=ds();return t&&(e.nonce=t),e.textContent=s.textContent,e.async=!1,fr(e,s),e}}function fr(s,e){for(const{name:t,value:r}of e.attributes)s.setAttribute(t,r)}function mr(s){const e=document.createElement("template");return e.innerHTML=s,e.content}function q(s,{target:e,cancelable:t,detail:r}={}){const i=new CustomEvent(s,{cancelable:t,bubbles:!0,composed:!0,detail:r});return e&&e.isConnected?e.dispatchEvent(i):document.documentElement.dispatchEvent(i),i}function Qt(s){s.preventDefault(),s.stopImmediatePropagation()}function Ie(){return document.visibilityState==="hidden"?as():os()}function os(){return new Promise(s=>requestAnimationFrame(()=>s()))}function as(){return new Promise(s=>setTimeout(()=>s(),0))}function pr(){return Promise.resolve()}function cs(s=""){return new DOMParser().parseFromString(s,"text/html")}function ls(s,...e){const t=gr(s,e).replace(/^\n/,"").split(`
`),r=t[0].match(/^\s+/),i=r?r[0].length:0;return t.map(o=>o.slice(i)).join(`
`)}function gr(s,e){return s.reduce((t,r,i)=>{const o=e[i]==null?"":e[i];return t+r+o},"")}function ne(){return Array.from({length:36}).map((s,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function tt(s,...e){for(const t of e.map(r=>r==null?void 0:r.getAttribute(s)))if(typeof t=="string")return t;return null}function br(s,...e){return e.some(t=>t&&t.hasAttribute(s))}function st(...s){for(const e of s)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function rt(...s){for(const e of s)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function vr(s,e=2e3){return new Promise(t=>{const r=()=>{s.removeEventListener("error",r),s.removeEventListener("load",r),t()};s.addEventListener("load",r,{once:!0}),s.addEventListener("error",r,{once:!0}),setTimeout(t,e)})}function hs(s){switch(s){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function Sr(s){return s=="advance"||s=="replace"||s=="restore"}function he(...s){const e=tt("data-turbo-action",...s);return Sr(e)?e:null}function xt(s){return document.querySelector(`meta[name="${s}"]`)}function it(s){const e=xt(s);return e&&e.content}function ds(){const s=xt("csp-nonce");if(s){const{nonce:e,content:t}=s;return e==""?t:e}}function wr(s,e){let t=xt(s);return t||(t=document.createElement("meta"),t.setAttribute("name",s),document.head.appendChild(t)),t.setAttribute("content",e),t}function ve(s,e){var t;if(s instanceof Element)return s.closest(e)||ve(s.assignedSlot||((t=s.getRootNode())==null?void 0:t.host),e)}function Vt(s){const e="[inert], :disabled, [hidden], details:not([open]), dialog:not([open])";return!!s&&s.closest(e)==null&&typeof s.focus=="function"}function us(s){return Array.from(s.querySelectorAll("[autofocus]")).find(Vt)}async function yr(s,e){const t=e();s(),await os();const r=e();return[t,r]}function fs(s){if(s==="_blank")return!1;if(s){for(const e of document.getElementsByName(s))if(e instanceof HTMLIFrameElement)return!1;return!0}else return!0}function ms(s){return ve(s,"a[href]:not([target^=_]):not([download])")}function ps(s){return D(s.getAttribute("href")||"")}function Er(s,e){let t=null;return(...r)=>{const i=()=>s.apply(this,r);clearTimeout(t),t=setTimeout(i,e)}}const Ar={"aria-disabled":{beforeSubmit:s=>{s.setAttribute("aria-disabled","true"),s.addEventListener("click",Qt)},afterSubmit:s=>{s.removeAttribute("aria-disabled"),s.removeEventListener("click",Qt)}},disabled:{beforeSubmit:s=>s.disabled=!0,afterSubmit:s=>s.disabled=!1}};var qe;class Tr{constructor(e){b(this,qe,null);Object.assign(this,e)}get submitter(){return S(this,qe)}set submitter(e){P(this,qe,Ar[e]||e)}}qe=new WeakMap;const Lr=new Tr({mode:"on",submitter:"disabled"}),O={drive:ur,forms:Lr};function D(s){return new URL(s.toString(),document.baseURI)}function de(s){let e;if(s.hash)return s.hash.slice(1);if(e=s.href.match(/#(.*)$/))return e[1]}function Wt(s,e){const t=(e==null?void 0:e.getAttribute("formaction"))||s.getAttribute("action")||s.action;return D(t)}function Rr(s){return(kr(s).match(/\.[^.]*$/)||[])[0]||""}function Pr(s,e){const t=Ir(e);return s.href===D(t).href||s.href.startsWith(t)}function Q(s,e){return Pr(s,e)&&!O.drive.unvisitableExtensions.has(Rr(s))}function Bt(s){const e=de(s);return e!=null?s.href.slice(0,-(e.length+1)):s.href}function Ye(s){return Bt(s)}function Cr(s,e){return D(s).href==D(e).href}function Mr(s){return s.pathname.split("/").slice(1)}function kr(s){return Mr(s).slice(-1)[0]}function Ir(s){return Fr(s.origin+s.pathname)}function Fr(s){return s.endsWith("/")?s:s+"/"}class Pt{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return D(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}}class qr extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){const r=this.values().next().value;this.delete(r)}super.add(e)}}const gs=new qr(20),Hr=window.fetch;function _t(s,e={}){const t=new Headers(e.headers||{}),r=ne();return gs.add(r),t.append("X-Turbo-Request-Id",r),Hr(s,{...e,headers:t})}function Ct(s){switch(s.toLowerCase()){case"get":return _.get;case"post":return _.post;case"put":return _.put;case"patch":return _.patch;case"delete":return _.delete}}const _={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function bs(s){switch(s.toLowerCase()){case Z.multipart:return Z.multipart;case Z.plain:return Z.plain;default:return Z.urlEncoded}}const Z={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"};var He,at,vs,ct,Ss;class Ce{constructor(e,t,r,i=new URLSearchParams,o=null,p=Z.urlEncoded){b(this,at);b(this,ct);h(this,"abortController",new AbortController);b(this,He,e=>{});var N;const[L,C]=Zt(D(r),t,i,p);this.delegate=e,this.url=L,this.target=o,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t.toUpperCase(),headers:{...this.defaultHeaders},body:C,signal:this.abortSignal,referrer:(N=this.delegate.referrer)==null?void 0:N.href},this.enctype=p}get method(){return this.fetchOptions.method}set method(e){const t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,r=Ct(e)||_.get;this.url.search="";const[i,o]=Zt(this.url,r,t,this.enctype);this.url=i,this.fetchOptions.body=o,this.fetchOptions.method=r.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:e}=this;this.delegate.prepareRequest(this);const t=await y(this,at,vs).call(this,e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=_t(this.url.href,e);const r=await this.response;return await this.receive(r)}catch(r){if(r.name!=="AbortError")throw y(this,ct,Ss).call(this,r)&&this.delegate.requestErrored(this,r),r}finally{this.delegate.requestFinished(this)}}async receive(e){const t=new Pt(e);return q("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return Mt(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}}He=new WeakMap,at=new WeakSet,vs=async function(e){const t=new Promise(i=>P(this,He,i)),r=q("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:S(this,He)},target:this.target});return this.url=r.detail.url,r.defaultPrevented&&await t,r},ct=new WeakSet,Ss=function(e){return!q("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented};function Mt(s){return Ct(s)==_.get}function Zt(s,e,t,r){const i=Array.from(t).length>0?new URLSearchParams(ws(t)):s.searchParams;return Mt(e)?[Br(s,i),null]:r==Z.urlEncoded?[s,i]:[s,t]}function ws(s){const e=[];for(const[t,r]of s)r instanceof File||e.push([t,r]);return e}function Br(s,e){const t=new URLSearchParams(ws(e));return s.search=t.toString(),s}class Or{constructor(e,t){h(this,"started",!1);h(this,"intersect",e=>{const t=e.slice(-1)[0];t!=null&&t.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)});this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class ue{static wrap(e){return typeof e=="string"?new this(mr(e)):e}constructor(e){this.fragment=Nr(e)}}h(ue,"contentType","text/vnd.turbo-stream.html");function Nr(s){for(const e of s.querySelectorAll("turbo-stream")){const t=document.importNode(e,!0);for(const r of t.templateElement.content.querySelectorAll("script"))r.replaceWith(Fe(r));e.replaceWith(t)}return s}const Dr=100;var ce,G;class xr{constructor(){b(this,ce,null);b(this,G,null)}get(e){if(S(this,G)&&S(this,G).url===e&&S(this,G).expire>Date.now())return S(this,G).request}setLater(e,t,r){this.clear(),P(this,ce,setTimeout(()=>{t.perform(),this.set(e,t,r),P(this,ce,null)},Dr))}set(e,t,r){P(this,G,{url:e,request:t,expire:new Date(new Date().getTime()+r)})}clear(){S(this,ce)&&clearTimeout(S(this,ce)),P(this,G,null)}}ce=new WeakMap,G=new WeakMap;const Vr=10*1e3,be=new xr,me={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"};class kt{constructor(e,t,r,i=!1){h(this,"state",me.initialized);const o=jr(t,r),p=$r(zr(t,r),o),L=Wr(t,r),C=Kr(t,r);this.delegate=e,this.formElement=t,this.submitter=r,this.fetchRequest=new Ce(this,o,p,L,t,C),this.mustRedirect=i}static confirmMethod(e){return Promise.resolve(confirm(e))}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=D(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){const{initialized:e,requesting:t}=me,r=tt("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof r=="string"&&!await(typeof O.forms.confirm=="function"?O.forms.confirm:kt.confirmMethod)(r,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){const{stopping:e,stopped:t}=me;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){const t=_r(it("csrf-param"))||it("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(ue.contentType)}requestStarted(e){this.state=me.waiting,this.submitter&&O.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),st(this.formElement),q("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){be.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if(be.clear(),this.requestMustRedirect(e)&&Ur(t)){const r=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,r)}else this.state=me.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=me.stopped,this.submitter&&O.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),rt(this.formElement),q("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||br("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var e;return(e=this.submitter)==null?void 0:e.getAttribute("data-turbo-submits-with")}}function Wr(s,e){const t=new FormData(s),r=e==null?void 0:e.getAttribute("name"),i=e==null?void 0:e.getAttribute("value");return r&&t.append(r,i||""),t}function _r(s){if(s!=null){const t=(document.cookie?document.cookie.split("; "):[]).find(r=>r.startsWith(s));if(t){const r=t.split("=").slice(1).join("=");return r?decodeURIComponent(r):void 0}}}function Ur(s){return s.statusCode==200&&!s.redirected}function zr(s,e){const t=typeof s.action=="string"?s.action:null;return e!=null&&e.hasAttribute("formaction")?e.getAttribute("formaction")||"":s.getAttribute("action")||t||""}function $r(s,e){const t=D(s);return Mt(e)&&(t.search=""),t}function jr(s,e){const t=(e==null?void 0:e.getAttribute("formmethod"))||s.getAttribute("method")||"";return Ct(t.toLowerCase())||_.get}function Kr(s,e){return bs((e==null?void 0:e.getAttribute("formenctype"))||s.enctype)}class It{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return us(this.element)}get permanentElements(){return Es(this.element)}getPermanentElementById(e){return ys(this.element,e)}getPermanentElementMapForSnapshot(e){const t={};for(const r of this.permanentElements){const{id:i}=r,o=e.getPermanentElementById(i);o&&(t[i]=[r,o])}return t}}function ys(s,e){return s.querySelector(`#${e}[data-turbo-permanent]`)}function Es(s){return s.querySelectorAll("[id][data-turbo-permanent]")}class Ut{constructor(e,t){h(this,"started",!1);h(this,"submitCaptured",()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)});h(this,"submitBubbled",e=>{if(!e.defaultPrevented){const t=e.target instanceof HTMLFormElement?e.target:void 0,r=e.submitter||void 0;t&&Xr(t,r)&&Yr(t,r)&&this.delegate.willSubmitForm(t,r)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,r))}});this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}function Xr(s,e){return((e==null?void 0:e.getAttribute("formmethod"))||s.getAttribute("method"))!="dialog"}function Yr(s,e){const t=(e==null?void 0:e.getAttribute("formtarget"))||s.getAttribute("target");return fs(t)}var Be,Oe;class As{constructor(e,t){b(this,Be,e=>{});b(this,Oe,e=>{});this.delegate=e,this.element=t}scrollToAnchor(e){const t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(de(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){const{isPreview:t,shouldRender:r,willRender:i,newSnapshot:o}=e,p=i;if(r)try{this.renderPromise=new Promise(B=>P(this,Be,B)),this.renderer=e,await this.prepareToRenderSnapshot(e);const L=new Promise(B=>P(this,Oe,B)),C={resume:S(this,Oe),render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(o,C)||await L,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(o,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,S(this,Be).call(this,void 0),delete this.renderPromise}else p&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}}Be=new WeakMap,Oe=new WeakMap;class Gr extends As{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new It(this.element)}}class Ts{constructor(e,t){h(this,"clickBubbled",e=>{this.clickEventIsSignificant(e)?this.clickEvent=e:delete this.clickEvent});h(this,"linkClicked",e=>{this.clickEvent&&this.clickEventIsSignificant(e)&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent});h(this,"willVisit",e=>{delete this.clickEvent});this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickEventIsSignificant(e){var i;const t=e.composed?(i=e.target)==null?void 0:i.parentElement:e.target,r=ms(t)||t;return r instanceof Element&&r.closest("turbo-frame, html")==this.element}}class Ls{constructor(e,t){h(this,"started",!1);h(this,"clickCaptured",()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)});h(this,"clickBubbled",e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){const t=e.composedPath&&e.composedPath()[0]||e.target,r=ms(t);if(r&&fs(r.target)){const i=ps(r);this.delegate.willFollowLinkToLocation(r,i,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(r,i))}}});this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}}class Rs{constructor(e,t){this.delegate=e,this.linkInterceptor=new Ls(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,r){return this.delegate.willSubmitFormLinkToLocation(e,t,r)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){const r=document.createElement("form"),i="hidden";for(const[W,E]of t.searchParams)r.append(Object.assign(document.createElement("input"),{type:i,name:W,value:E}));const o=Object.assign(t,{search:""});r.setAttribute("data-turbo","true"),r.setAttribute("action",o.href),r.setAttribute("hidden","");const p=e.getAttribute("data-turbo-method");p&&r.setAttribute("method",p);const L=e.getAttribute("data-turbo-frame");L&&r.setAttribute("data-turbo-frame",L);const C=he(e);C&&r.setAttribute("data-turbo-action",C);const N=e.getAttribute("data-turbo-confirm");N&&r.setAttribute("data-turbo-confirm",N),e.hasAttribute("data-turbo-stream")&&r.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,r),document.body.appendChild(r),r.addEventListener("turbo:submit-end",()=>r.remove(),{once:!0}),requestAnimationFrame(()=>r.requestSubmit())}}class Ps{static async preservingPermanentElements(e,t,r){const i=new this(e,t);i.enter(),await r(),i.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(const e in this.permanentElementMap){const[t,r]=this.permanentElementMap[e];this.delegate.enteringBardo(t,r),this.replaceNewPermanentElementWithPlaceholder(r)}}leave(){for(const e in this.permanentElementMap){const[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){const t=Jr(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){const t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){const t=this.getPlaceholderById(e.id);t==null||t.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function Jr(s){const e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",s.id),e}var J;class zt{constructor(e,t,r,i=!0){b(this,J,null);this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=r,this.willRender=i,this.renderElement=this.constructor.renderElement,this.promise=new Promise((o,p)=>this.resolvingFunctions={resolve:o,reject:p})}static renderElement(e,t){}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await Ps.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){const e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}}enteringBardo(e){S(this,J)||e.contains(this.currentSnapshot.activeElement)&&P(this,J,this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(S(this,J))&&S(this,J)instanceof HTMLElement&&(S(this,J).focus(),P(this,J,null))}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}}J=new WeakMap;class Ft extends zt{static renderElement(e,t){var p;const r=document.createRange();r.selectNodeContents(e),r.deleteContents();const i=t,o=(p=i.ownerDocument)==null?void 0:p.createRange();o&&(o.selectNodeContents(i),e.appendChild(o.extractContents()))}constructor(e,t,r,i,o,p=!0){super(t,r,i,o,p),this.delegate=e}get shouldRender(){return!0}async render(){await Ie(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await Ie(),this.focusFirstAutofocusableElement(),await Ie(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const e=this.currentElement.firstElementChild,t=Qr(this.currentElement.getAttribute("data-autoscroll-block"),"end"),r=Zr(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:r}),!0}return!1}activateScriptElements(){for(const e of this.newScriptElements){const t=Fe(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function Qr(s,e){return s=="end"||s=="start"||s=="center"||s=="nearest"?s:e}function Zr(s,e){return s=="auto"||s=="smooth"?s:e}var ei=function(){const s=()=>{},e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:s,afterNodeAdded:s,beforeNodeMorphed:s,afterNodeMorphed:s,beforeNodeRemoved:s,afterNodeRemoved:s,beforeAttributeUpdated:s},head:{style:"merge",shouldPreserve:E=>E.getAttribute("im-preserve")==="true",shouldReAppend:E=>E.getAttribute("im-re-append")==="true",shouldRemove:s,afterHeadMorphed:s},restoreFocus:!0};function t(E,M,A={}){E=B(E);const R=W(M),T=N(E,R,A),w=i(T,()=>L(T,E,R,d=>d.morphStyle==="innerHTML"?(o(d,E,R),Array.from(E.childNodes)):r(d,E,R)));return T.pantry.remove(),w}function r(E,M,A){const R=W(M);let T=Array.from(R.childNodes);const w=T.indexOf(M),d=T.length-(w+1);return o(E,R,A,M,M.nextSibling),T=Array.from(R.childNodes),T.slice(w,T.length-d)}function i(E,M){var u;if(!E.config.restoreFocus)return M();let A=document.activeElement;if(!(A instanceof HTMLInputElement||A instanceof HTMLTextAreaElement))return M();const{id:R,selectionStart:T,selectionEnd:w}=A,d=M();return R&&R!==((u=document.activeElement)==null?void 0:u.id)&&(A=E.target.querySelector(`#${R}`),A==null||A.focus()),A&&!A.selectionEnd&&w&&A.setSelectionRange(T,w),d}const o=function(){function E(l,n,a,c=null,f=null){n instanceof HTMLTemplateElement&&a instanceof HTMLTemplateElement&&(n=n.content,a=a.content),c||(c=n.firstChild);for(const g of a.childNodes){if(c&&c!=f){const m=A(l,g,c,f);if(m){m!==c&&T(l,c,m),p(m,g,l),c=m.nextSibling;continue}}if(g instanceof Element&&l.persistentIds.has(g.id)){const m=w(n,g.id,c,l);p(m,g,l),c=m.nextSibling;continue}const v=M(n,g,c,l);v&&(c=v.nextSibling)}for(;c&&c!=f;){const g=c;c=c.nextSibling,R(l,g)}}function M(l,n,a,c){if(c.callbacks.beforeNodeAdded(n)===!1)return null;if(c.idMap.has(n)){const f=document.createElement(n.tagName);return l.insertBefore(f,a),p(f,n,c),c.callbacks.afterNodeAdded(f),f}else{const f=document.importNode(n,!0);return l.insertBefore(f,a),c.callbacks.afterNodeAdded(f),f}}const A=function(){function l(c,f,g,v){let m=null,$=f.nextSibling,x=0,H=g;for(;H&&H!=v;){if(a(H,f)){if(n(c,H,f))return H;m===null&&(c.idMap.has(H)||(m=H))}if(m===null&&$&&a(H,$)&&(x++,$=$.nextSibling,x>=2&&(m=void 0)),H.contains(document.activeElement))break;H=H.nextSibling}return m||null}function n(c,f,g){let v=c.idMap.get(f),m=c.idMap.get(g);if(!m||!v)return!1;for(const $ of v)if(m.has($))return!0;return!1}function a(c,f){const g=c,v=f;return g.nodeType===v.nodeType&&g.tagName===v.tagName&&(!g.id||g.id===v.id)}return l}();function R(l,n){var a;if(l.idMap.has(n))u(l.pantry,n,null);else{if(l.callbacks.beforeNodeRemoved(n)===!1)return;(a=n.parentNode)==null||a.removeChild(n),l.callbacks.afterNodeRemoved(n)}}function T(l,n,a){let c=n;for(;c&&c!==a;){let f=c;c=c.nextSibling,R(l,f)}return c}function w(l,n,a,c){const f=c.target.querySelector(`#${n}`)||c.pantry.querySelector(`#${n}`);return d(f,c),u(l,f,a),f}function d(l,n){const a=l.id;for(;l=l.parentNode;){let c=n.idMap.get(l);c&&(c.delete(a),c.size||n.idMap.delete(l))}}function u(l,n,a){if(l.moveBefore)try{l.moveBefore(n,a)}catch{l.insertBefore(n,a)}else l.insertBefore(n,a)}return E}(),p=function(){function E(d,u,l){return l.ignoreActive&&d===document.activeElement?null:(l.callbacks.beforeNodeMorphed(d,u)===!1||(d instanceof HTMLHeadElement&&l.head.ignore||(d instanceof HTMLHeadElement&&l.head.style!=="morph"?C(d,u,l):(M(d,u,l),w(d,l)||o(l,d,u))),l.callbacks.afterNodeMorphed(d,u)),d)}function M(d,u,l){let n=u.nodeType;if(n===1){const a=d,c=u,f=a.attributes,g=c.attributes;for(const v of g)T(v.name,a,"update",l)||a.getAttribute(v.name)!==v.value&&a.setAttribute(v.name,v.value);for(let v=f.length-1;0<=v;v--){const m=f[v];if(m&&!c.hasAttribute(m.name)){if(T(m.name,a,"remove",l))continue;a.removeAttribute(m.name)}}w(a,l)||A(a,c,l)}(n===8||n===3)&&d.nodeValue!==u.nodeValue&&(d.nodeValue=u.nodeValue)}function A(d,u,l){if(d instanceof HTMLInputElement&&u instanceof HTMLInputElement&&u.type!=="file"){let n=u.value,a=d.value;R(d,u,"checked",l),R(d,u,"disabled",l),u.hasAttribute("value")?a!==n&&(T("value",d,"update",l)||(d.setAttribute("value",n),d.value=n)):T("value",d,"remove",l)||(d.value="",d.removeAttribute("value"))}else if(d instanceof HTMLOptionElement&&u instanceof HTMLOptionElement)R(d,u,"selected",l);else if(d instanceof HTMLTextAreaElement&&u instanceof HTMLTextAreaElement){let n=u.value,a=d.value;if(T("value",d,"update",l))return;n!==a&&(d.value=n),d.firstChild&&d.firstChild.nodeValue!==n&&(d.firstChild.nodeValue=n)}}function R(d,u,l,n){const a=u[l],c=d[l];if(a!==c){const f=T(l,d,"update",n);f||(d[l]=u[l]),a?f||d.setAttribute(l,""):T(l,d,"remove",n)||d.removeAttribute(l)}}function T(d,u,l,n){return d==="value"&&n.ignoreActiveValue&&u===document.activeElement?!0:n.callbacks.beforeAttributeUpdated(d,u,l)===!1}function w(d,u){return!!u.ignoreActiveValue&&d===document.activeElement&&d!==document.body}return E}();function L(E,M,A,R){if(E.head.block){const T=M.querySelector("head"),w=A.querySelector("head");if(T&&w){const d=C(T,w,E);return Promise.all(d).then(()=>{const u=Object.assign(E,{head:{block:!1,ignore:!0}});return R(u)})}}return R(E)}function C(E,M,A){let R=[],T=[],w=[],d=[],u=new Map;for(const n of M.children)u.set(n.outerHTML,n);for(const n of E.children){let a=u.has(n.outerHTML),c=A.head.shouldReAppend(n),f=A.head.shouldPreserve(n);a||f?c?T.push(n):(u.delete(n.outerHTML),w.push(n)):A.head.style==="append"?c&&(T.push(n),d.push(n)):A.head.shouldRemove(n)!==!1&&T.push(n)}d.push(...u.values());let l=[];for(const n of d){let a=document.createRange().createContextualFragment(n.outerHTML).firstChild;if(A.callbacks.beforeNodeAdded(a)!==!1){if("href"in a&&a.href||"src"in a&&a.src){let c,f=new Promise(function(g){c=g});a.addEventListener("load",function(){c()}),l.push(f)}E.appendChild(a),A.callbacks.afterNodeAdded(a),R.push(a)}}for(const n of T)A.callbacks.beforeNodeRemoved(n)!==!1&&(E.removeChild(n),A.callbacks.afterNodeRemoved(n));return A.head.afterHeadMorphed(E,{added:R,kept:w,removed:T}),l}const N=function(){function E(u,l,n){const{persistentIds:a,idMap:c}=w(u,l),f=M(n),g=f.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(g))throw`Do not understand how to morph style ${g}`;return{target:u,newContent:l,config:f,morphStyle:g,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,restoreFocus:f.restoreFocus,idMap:c,persistentIds:a,pantry:A(),callbacks:f.callbacks,head:f.head}}function M(u){let l=Object.assign({},e);return Object.assign(l,u),l.callbacks=Object.assign({},e.callbacks,u.callbacks),l.head=Object.assign({},e.head,u.head),l}function A(){const u=document.createElement("div");return u.hidden=!0,document.body.insertAdjacentElement("afterend",u),u}function R(u){let l=Array.from(u.querySelectorAll("[id]"));return u.id&&l.push(u),l}function T(u,l,n,a){for(const c of a)if(l.has(c.id)){let f=c;for(;f;){let g=u.get(f);if(g==null&&(g=new Set,u.set(f,g)),g.add(c.id),f===n)break;f=f.parentElement}}}function w(u,l){const n=R(u),a=R(l),c=d(n,a);let f=new Map;T(f,c,u,n);const g=l.__idiomorphRoot||l;return T(f,c,g,a),{persistentIds:c,idMap:f}}function d(u,l){let n=new Set,a=new Map;for(const{id:f,tagName:g}of u)a.has(f)?n.add(f):a.set(f,g);let c=new Set;for(const{id:f,tagName:g}of l)c.has(f)?n.add(f):a.get(f)===g&&c.add(f);for(const f of n)c.delete(f);return c}return E}(),{normalizeElement:B,normalizeParent:W}=function(){const E=new WeakSet;function M(w){return w instanceof Document?w.documentElement:w}function A(w){if(w==null)return document.createElement("div");if(typeof w=="string")return A(T(w));if(E.has(w))return w;if(w instanceof Node){if(w.parentNode)return R(w);{const d=document.createElement("div");return d.append(w),d}}else{const d=document.createElement("div");for(const u of[...w])d.append(u);return d}}function R(w){return{childNodes:[w],querySelectorAll:d=>{const u=w.querySelectorAll(d);return w.matches(d)?[w,...u]:u},insertBefore:(d,u)=>w.parentNode.insertBefore(d,u),moveBefore:(d,u)=>w.parentNode.moveBefore(d,u),get __idiomorphRoot(){return w}}}function T(w){let d=new DOMParser,u=w.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(u.match(/<\/html>/)||u.match(/<\/head>/)||u.match(/<\/body>/)){let l=d.parseFromString(w,"text/html");if(u.match(/<\/html>/))return E.add(l),l;{let n=l.firstChild;return n&&E.add(n),n}}else{let n=d.parseFromString("<body><template>"+w+"</template></body>","text/html").body.querySelector("template").content;return E.add(n),n}}return{normalizeElement:M,normalizeParent:A}}();return{morph:t,defaults:e}}();function $t(s,e,{callbacks:t,...r}={}){ei.morph(s,e,{...r,callbacks:new ti(t)})}function Cs(s,e){$t(s,e.childNodes,{morphStyle:"innerHTML"})}var Ne;class ti{constructor({beforeNodeMorphed:e}={}){b(this,Ne,void 0);h(this,"beforeNodeAdded",e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id)));h(this,"beforeNodeMorphed",(e,t)=>{if(e instanceof Element)return!e.hasAttribute("data-turbo-permanent")&&S(this,Ne).call(this,e,t)?!q("turbo:before-morph-element",{cancelable:!0,target:e,detail:{currentElement:e,newElement:t}}).defaultPrevented:!1});h(this,"beforeAttributeUpdated",(e,t,r)=>!q("turbo:before-morph-attribute",{cancelable:!0,target:t,detail:{attributeName:e,mutationType:r}}).defaultPrevented);h(this,"beforeNodeRemoved",e=>this.beforeNodeMorphed(e));h(this,"afterNodeMorphed",(e,t)=>{e instanceof Element&&q("turbo:morph-element",{target:e,detail:{currentElement:e,newElement:t}})});P(this,Ne,e||(()=>!0))}}Ne=new WeakMap;class si extends Ft{static renderElement(e,t){q("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:t}}),Cs(e,t)}async preservingPermanentElements(e){return await e()}}const Y=class Y{constructor(){h(this,"hiding",!1);h(this,"value",0);h(this,"visible",!1);h(this,"trickle",()=>{this.setValue(this.value+Math.random()/100)});this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return ls`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${Y.animationDuration}ms ease-out,
          opacity ${Y.animationDuration/2}ms ${Y.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,Y.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,Y.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){const e=document.createElement("style");e.type="text/css",e.textContent=Y.defaultCSS;const t=ds();return t&&(e.nonce=t),e}createProgressElement(){const e=document.createElement("div");return e.className="turbo-progress-bar",e}};h(Y,"animationDuration",300);let Ot=Y;class ri extends It{constructor(){super(...arguments);h(this,"detailsByOuterHTML",this.children.filter(t=>!ai(t)).map(t=>hi(t)).reduce((t,r)=>{const{outerHTML:i}=r,o=i in t?t[i]:{type:ii(r),tracked:ni(r),elements:[]};return{...t,[i]:{...o,elements:[...o.elements,r]}}},{}))}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(t=>this.detailsByOuterHTML[t].tracked).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,r){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in r.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==t).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((t,r)=>{const{type:i,tracked:o,elements:p}=this.detailsByOuterHTML[r];return i==null&&!o?[...t,...p]:p.length>1?[...t,...p.slice(1)]:t},[])}getMetaValue(t){const r=this.findMetaElementByName(t);return r?r.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce((r,i)=>{const{elements:[o]}=this.detailsByOuterHTML[i];return li(o,t)?o:r},void 0|void 0)}}function ii(s){if(oi(s))return"script";if(ci(s))return"stylesheet"}function ni(s){return s.getAttribute("data-turbo-track")=="reload"}function oi(s){return s.localName=="script"}function ai(s){return s.localName=="noscript"}function ci(s){const e=s.localName;return e=="style"||e=="link"&&s.getAttribute("rel")=="stylesheet"}function li(s,e){return s.localName=="meta"&&s.getAttribute("name")==e}function hi(s){return s.hasAttribute("nonce")&&s.setAttribute("nonce",""),s}class U extends It{static fromHTMLString(e=""){return this.fromDocument(cs(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:r}){return new this(e,t,new ri(r))}constructor(e,t,r){super(t),this.documentElement=e,this.headSnapshot=r}clone(){const e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),r=e.querySelectorAll("select");for(const[i,o]of t.entries()){const p=r[i];for(const L of p.selectedOptions)L.selected=!1;for(const L of o.selectedOptions)p.options[L.index].selected=!0}for(const i of e.querySelectorAll('input[type="password"]'))i.value="";return new U(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){const e=this.getSetting("root")??"/";return D(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}}var De,ee;class di{constructor(){b(this,De,!1);b(this,ee,Promise.resolve())}renderChange(e,t){return e&&this.viewTransitionsAvailable&&!S(this,De)?(P(this,De,!0),P(this,ee,S(this,ee).then(async()=>{await document.startViewTransition(t).finished}))):P(this,ee,S(this,ee).then(t)),S(this,ee)}get viewTransitionsAvailable(){return document.startViewTransition}}De=new WeakMap,ee=new WeakMap;const ui={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},Ge={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},X={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},Se={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},fi={advance:"forward",restore:"back",replace:"none"};class mi{constructor(e,t,r,i={}){h(this,"identifier",ne());h(this,"timingMetrics",{});h(this,"followedRedirect",!1);h(this,"historyChanged",!1);h(this,"scrolled",!1);h(this,"shouldCacheSnapshot",!0);h(this,"acceptsStreamResponse",!1);h(this,"snapshotCached",!1);h(this,"state",X.initialized);h(this,"viewTransitioner",new di);this.delegate=e,this.location=t,this.restorationIdentifier=r||ne();const{action:o,historyChanged:p,referrer:L,snapshot:C,snapshotHTML:N,response:B,visitCachedSnapshot:W,willRender:E,updateHistory:M,shouldCacheSnapshot:A,acceptsStreamResponse:R,direction:T}={...ui,...i};this.action=o,this.historyChanged=p,this.referrer=L,this.snapshot=C,this.snapshotHTML=N,this.response=B,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=W,this.willRender=E,this.updateHistory=M,this.scrolled=!E,this.shouldCacheSnapshot=A,this.acceptsStreamResponse=R,this.direction=T||fi[o]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==X.initialized&&(this.recordTimingMetric(Ge.visitStart),this.state=X.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==X.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=X.canceled)}complete(){this.state==X.started&&(this.recordTimingMetric(Ge.visitEnd),this.adapter.visitCompleted(this),this.state=X.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==X.started&&(this.state=X.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){var e;if(!this.historyChanged&&this.updateHistory){const t=this.location.href===((e=this.referrer)==null?void 0:e.href)?"replace":this.action,r=hs(t);this.history.update(r,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Ce(this,_.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(Ge.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){const{statusCode:t}=e;es(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(Ge.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,es(e)&&t!=null){const r=U.fromHTMLString(t);await this.renderPageSnapshot(r,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(U.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){const e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!de(this.location)||e.hasAnchor(de(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return U.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const e=this.getCachedSnapshot();if(e){const t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){var e;this.redirectedToLocation&&!this.followedRedirect&&((e=this.response)!=null&&e.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(ue.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){const r=await t.responseHTML,{redirected:i,statusCode:o}=t;r==null?this.recordResponse({statusCode:Se.contentTypeMismatch,redirected:i}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:o,responseHTML:r,redirected:i}))}async requestFailedWithResponse(e,t){const r=await t.responseHTML,{redirected:i,statusCode:o}=t;r==null?this.recordResponse({statusCode:Se.contentTypeMismatch,redirected:i}):this.recordResponse({statusCode:o,responseHTML:r,redirected:i})}requestErrored(e,t){this.recordResponse({statusCode:Se.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){const e=de(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),await new Promise(t=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>t(),0):requestAnimationFrame(()=>t())}),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function es(s){return s>=200&&s<300}class pi{constructor(e){h(this,"progressBar",new Ot);h(this,"showProgressBar",()=>{this.progressBar.show()});this.session=e}visitProposedToLocation(e,t){Q(e,this.navigator.rootLocation)?this.navigator.startVisit(e,(t==null?void 0:t.restorationIdentifier)||ne(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case Se.networkFailure:case Se.timeoutFailure:case Se.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}linkPrefetchingIsEnabledForLocation(e){return!0}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(e){var t;q("turbo:reload",{detail:e}),window.location.href=((t=this.location)==null?void 0:t.toString())||window.location.href}get navigator(){return this.session.navigator}}class gi{constructor(){h(this,"selector","[data-turbo-temporary]");h(this,"deprecatedSelector","[data-turbo-cache=false]");h(this,"started",!1);h(this,"removeTemporaryElements",e=>{for(const t of this.temporaryElements)t.remove()})}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}}var lt,Ms,we,Je,ye,Qe;class bi{constructor(e,t){b(this,lt);b(this,we);b(this,ye);this.session=e,this.element=t,this.linkInterceptor=new Ts(this,t),this.formSubmitObserver=new Ut(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,r){return y(this,we,Je).call(this,e)}linkClickIntercepted(e,t,r){const i=y(this,ye,Qe).call(this,e);i&&i.delegate.linkClickIntercepted(e,t,r)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&y(this,lt,Ms).call(this,e,t)&&y(this,we,Je).call(this,e,t)}formSubmitted(e,t){const r=y(this,ye,Qe).call(this,e,t);r&&r.delegate.formSubmitted(e,t)}}lt=new WeakSet,Ms=function(e,t){const r=Wt(e,t),i=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),o=D((i==null?void 0:i.content)??"/");return y(this,we,Je).call(this,e,t)&&Q(r,o)},we=new WeakSet,Je=function(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){const i=y(this,ye,Qe).call(this,e,t);return i?i!=e.closest("turbo-frame"):!1}else return!1},ye=new WeakSet,Qe=function(e,t){const r=(t==null?void 0:t.getAttribute("data-turbo-frame"))||e.getAttribute("data-turbo-frame");if(r&&r!="_top"){const i=this.element.querySelector(`#${r}:not([disabled])`);if(i instanceof z)return i}};class vi{constructor(e){h(this,"location");h(this,"restorationIdentifier",ne());h(this,"restorationData",{});h(this,"started",!1);h(this,"pageLoaded",!1);h(this,"currentIndex",0);h(this,"onPopState",e=>{if(this.shouldHandlePopState()){const{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);const{restorationIdentifier:r,restorationIndex:i}=t;this.restorationIdentifier=r;const o=i>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,r,o),this.currentIndex=i}}});h(this,"onPageLoad",async e=>{await pr(),this.pageLoaded=!0});this.delegate=e}start(){var e,t;this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=((t=(e=history.state)==null?void 0:e.turbo)==null?void 0:t.restorationIndex)||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,r=ne()){e===history.pushState&&++this.currentIndex;const i={turbo:{restorationIdentifier:r,restorationIndex:this.currentIndex}};e.call(history,i,"",t.href),this.location=t,this.restorationIdentifier=r}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){const{restorationIdentifier:t}=this,r=this.restorationData[t];this.restorationData[t]={...r,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}var Ee,xe,Ve,We,ht,_e,dt,ks,ut,Is;class Si{constructor(e,t){b(this,dt);b(this,ut);h(this,"started",!1);b(this,Ee,null);b(this,xe,()=>{this.eventTarget.addEventListener("mouseenter",S(this,Ve),{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",S(this,We),{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",S(this,_e),!0),this.started=!0});b(this,Ve,e=>{if(it("turbo-prefetch")==="false")return;const t=e.target;if(t.matches&&t.matches("a[href]:not([target^=_]):not([download])")&&y(this,ut,Is).call(this,t)){const i=t,o=ps(i);if(this.delegate.canPrefetchRequestToLocation(i,o)){P(this,Ee,i);const p=new Ce(this,_.get,o,new URLSearchParams,t);be.setLater(o.toString(),p,S(this,dt,ks))}}});b(this,We,e=>{e.target===S(this,Ee)&&S(this,ht).call(this)});b(this,ht,()=>{be.clear(),P(this,Ee,null)});b(this,_e,e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="GET"){const t=be.get(e.detail.url.toString());t&&(e.detail.fetchRequest=t),be.clear()}});this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",S(this,xe),{once:!0}):S(this,xe).call(this))}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",S(this,Ve),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",S(this,We),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",S(this,_e),!0),this.started=!1)}prepareRequest(e){const t=e.target;e.headers["X-Sec-Purpose"]="prefetch";const r=t.closest("turbo-frame"),i=t.getAttribute("data-turbo-frame")||(r==null?void 0:r.getAttribute("target"))||(r==null?void 0:r.id);i&&i!=="_top"&&(e.headers["Turbo-Frame"]=i)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}}Ee=new WeakMap,xe=new WeakMap,Ve=new WeakMap,We=new WeakMap,ht=new WeakMap,_e=new WeakMap,dt=new WeakSet,ks=function(){return Number(it("turbo-prefetch-cache-time"))||Vr},ut=new WeakSet,Is=function(e){return!(!e.getAttribute("href")||wi(e)||yi(e)||Ei(e)||Ai(e)||Li(e))};const wi=s=>s.origin!==document.location.origin||!["http:","https:"].includes(s.protocol)||s.hasAttribute("target"),yi=s=>s.pathname+s.search===document.location.pathname+document.location.search||s.href.startsWith("#"),Ei=s=>{if(s.getAttribute("data-turbo-prefetch")==="false"||s.getAttribute("data-turbo")==="false")return!0;const e=ve(s,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},Ai=s=>{const e=s.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||Ti(s)||s.hasAttribute("data-turbo-confirm")||s.hasAttribute("data-turbo-stream"))},Ti=s=>s.hasAttribute("data-remote")||s.hasAttribute("data-behavior")||s.hasAttribute("data-confirm")||s.hasAttribute("data-method"),Li=s=>q("turbo:before-prefetch",{target:s,cancelable:!0}).defaultPrevented;var ft,Fs,mt,qs;class Ri{constructor(e){b(this,ft);b(this,mt);this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,r={}){this.stop(),this.currentVisit=new mi(this,D(e),t,{referrer:this.location,...r}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new kt(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){const r=await t.responseHTML;if(r){const i=e.isSafe;i||this.view.clearSnapshotCache();const{statusCode:o,redirected:p}=t,C={action:y(this,ft,Fs).call(this,e,t),shouldCacheSnapshot:i,response:{statusCode:o,responseHTML:r,redirected:p}};this.proposeVisit(t.location,C)}}}async formSubmissionFailedWithResponse(e,t){const r=await t.responseHTML;if(r){const i=U.fromHTMLString(r);t.serverError?await this.view.renderError(i,this.currentVisit):await this.view.renderPage(i,!1,!0,this.currentVisit),i.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}linkPrefetchingIsEnabledForLocation(e){return typeof this.adapter.linkPrefetchingIsEnabledForLocation=="function"?this.adapter.linkPrefetchingIsEnabledForLocation(e):!0}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e),delete this.currentVisit}locationWithActionIsSamePage(e,t){const r=de(e),i=de(this.view.lastRenderedLocation),o=t==="restore"&&typeof r>"u";return t!=="replace"&&Bt(e)===Bt(this.view.lastRenderedLocation)&&(o||r!=null&&r!==i)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}}ft=new WeakSet,Fs=function(e,t){const{submitter:r,formElement:i}=e;return he(r,i)||y(this,mt,qs).call(this,t)},mt=new WeakSet,qs=function(e){var r;return e.redirected&&e.location.href===((r=this.location)==null?void 0:r.href)?"replace":"advance"};const oe={initial:0,loading:1,interactive:2,complete:3};class Pi{constructor(e){h(this,"stage",oe.initial);h(this,"started",!1);h(this,"interpretReadyState",()=>{const{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()});h(this,"pageWillUnload",()=>{this.delegate.pageWillUnload()});this.delegate=e}start(){this.started||(this.stage==oe.initial&&(this.stage=oe.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==oe.loading&&(this.stage=oe.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==oe.interactive&&(this.stage=oe.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class Ci{constructor(e){h(this,"started",!1);h(this,"onScroll",()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})});this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(e){this.delegate.scrollPositionChanged(e)}}class Mi{render({fragment:e}){Ps.preservingPermanentElements(this,ki(e),()=>{Ii(e,()=>{Fi(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}}function ki(s){const e=Es(document.documentElement),t={};for(const r of e){const{id:i}=r;for(const o of s.querySelectorAll("turbo-stream")){const p=ys(o.templateElement.content,i);p&&(t[i]=[r,p])}}return t}async function Ii(s,e){const t=`turbo-stream-autofocus-${ne()}`,r=s.querySelectorAll("turbo-stream"),i=qi(r);let o=null;if(i&&(i.id?o=i.id:o=t,i.id=o),e(),await Ie(),(document.activeElement==null||document.activeElement==document.body)&&o){const L=document.getElementById(o);Vt(L)&&L.focus(),L&&L.id==t&&L.removeAttribute("id")}}async function Fi(s){const[e,t]=await yr(s,()=>document.activeElement),r=e&&e.id;if(r){const i=document.getElementById(r);Vt(i)&&i!=t&&i.focus()}}function qi(s){for(const e of s){const t=us(e.templateElement.content);if(t)return t}return null}var te;class Hi{constructor(e){h(this,"sources",new Set);b(this,te,!1);h(this,"inspectFetchResponse",e=>{const t=Bi(e);t&&Oi(t)&&(e.preventDefault(),this.receiveMessageResponse(t))});h(this,"receiveMessageEvent",e=>{S(this,te)&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)});this.delegate=e}start(){S(this,te)||(P(this,te,!0),addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){S(this,te)&&(P(this,te,!1),removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}async receiveMessageResponse(e){const t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(ue.wrap(e))}}te=new WeakMap;function Bi(s){var t;const e=(t=s.detail)==null?void 0:t.fetchResponse;if(e instanceof Pt)return e}function Oi(s){return(s.contentType??"").startsWith(ue.contentType)}class Ni extends zt{static renderElement(e,t){const{documentElement:r,body:i}=document;r.replaceChild(t,i)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const e of this.scriptElements){const t=e.parentNode;if(t){const r=Fe(e);t.replaceChild(r,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}var pt,Hs;class qt extends zt{constructor(){super(...arguments);b(this,pt)}static renderElement(t,r){document.body&&r instanceof HTMLBodyElement?document.body.replaceWith(r):document.documentElement.appendChild(r)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){y(this,pt,Hs).call(this),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const t=this.mergeProvisionalElements(),r=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await r,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const t=[];for(const r of this.newHeadStylesheetElements)t.push(vr(r)),document.head.appendChild(r);await Promise.all(t)}copyNewHeadScriptElements(){for(const t of this.newHeadScriptElements)document.head.appendChild(Fe(t))}removeUnusedDynamicStylesheetElements(){for(const t of this.unusedDynamicStylesheetElements)document.head.removeChild(t)}async mergeProvisionalElements(){const t=[...this.newHeadProvisionalElements];for(const r of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(r,t)||document.head.removeChild(r);for(const r of t)document.head.appendChild(r)}isCurrentElementInElementList(t,r){for(const[i,o]of r.entries()){if(t.tagName=="TITLE"){if(o.tagName!="TITLE")continue;if(t.innerHTML==o.innerHTML)return r.splice(i,1),!0}if(o.isEqualNode(t))return r.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(const t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const t of this.newBodyScriptElements){const r=Fe(t);t.replaceWith(r)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(t=>t.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}pt=new WeakSet,Hs=function(){const{documentElement:t}=this.currentSnapshot,{lang:r}=this.newSnapshot;r?t.setAttribute("lang",r):t.removeAttribute("lang")};class Di extends qt{static renderElement(e,t){$t(e,t,{callbacks:{beforeNodeMorphed:r=>!ts(r)}});for(const r of e.querySelectorAll("turbo-frame"))ts(r)&&r.reload();q("turbo:morph",{detail:{currentElement:e,newElement:t}})}async preservingPermanentElements(e){return await e()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}}function ts(s){return s instanceof z&&s.src&&s.refresh==="morph"&&!s.closest("[data-turbo-permanent]")}class xi{constructor(e){h(this,"keys",[]);h(this,"snapshots",{});this.size=e}has(e){return Ye(e)in this.snapshots}get(e){if(this.has(e)){const t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[Ye(e)]}write(e,t){this.snapshots[Ye(e)]=t}touch(e){const t=Ye(e),r=this.keys.indexOf(t);r>-1&&this.keys.splice(r,1),this.keys.unshift(t),this.trim()}trim(){for(const e of this.keys.splice(this.size))delete this.snapshots[e]}}class Vi extends As{constructor(){super(...arguments);h(this,"snapshotCache",new xi(10));h(this,"lastRenderedLocation",new URL(location.href));h(this,"forceReloaded",!1)}shouldTransitionTo(t){return this.snapshot.prefersViewTransitions&&t.prefersViewTransitions}renderPage(t,r=!1,i=!0,o){const L=this.isPageRefresh(o)&&this.snapshot.shouldMorphPage?Di:qt,C=new L(this.snapshot,t,r,i);return C.shouldRender?o==null||o.changeHistory():this.forceReloaded=!0,this.render(C)}renderError(t,r){r==null||r.changeHistory();const i=new Ni(this.snapshot,t,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:r}=this;await as();const i=t.clone();return this.snapshotCache.put(r,i),i}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}isPageRefresh(t){return!t||this.lastRenderedLocation.pathname===t.location.pathname&&t.action==="replace"}shouldPreserveScrollPosition(t){return this.isPageRefresh(t)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return U.fromElement(this.element)}}var Ue;class Wi{constructor(e,t){h(this,"selector","a[data-turbo-preload]");b(this,Ue,()=>{this.preloadOnLoadLinksForView(document.body)});this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",S(this,Ue)):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",S(this,Ue))}preloadOnLoadLinksForView(e){for(const t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){const t=new URL(e.href);if(this.snapshotCache.has(t))return;await new Ce(this,_.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{const r=await t.responseHTML,i=U.fromHTMLString(r);this.snapshotCache.put(e.url,i)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}}Ue=new WeakMap;var Ae,Ze;class _i{constructor(e){b(this,Ae);this.session=e}clear(){this.session.clearCache()}resetCacheControl(){y(this,Ae,Ze).call(this,"")}exemptPageFromCache(){y(this,Ae,Ze).call(this,"no-cache")}exemptPageFromPreview(){y(this,Ae,Ze).call(this,"no-preview")}}Ae=new WeakSet,Ze=function(e){wr("turbo-cache-control",e)};var ze;class Ui{constructor(e){h(this,"navigator",new Ri(this));h(this,"history",new vi(this));h(this,"view",new Vi(this,document.documentElement));h(this,"adapter",new pi(this));h(this,"pageObserver",new Pi(this));h(this,"cacheObserver",new gi);h(this,"linkPrefetchObserver",new Si(this,document));h(this,"linkClickObserver",new Ls(this,window));h(this,"formSubmitObserver",new Ut(this,document));h(this,"scrollObserver",new Ci(this));h(this,"streamObserver",new Hi(this));h(this,"formLinkClickObserver",new Rs(this,document.documentElement));h(this,"frameRedirector",new bi(this,document.documentElement));h(this,"streamMessageRenderer",new Mi);h(this,"cache",new _i(this));h(this,"enabled",!0);h(this,"started",!1);b(this,ze,150);this.recentRequests=e,this.preloader=new Wi(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){const r=t.frame?document.getElementById(t.frame):null;if(r instanceof z){const i=t.action||he(r);r.delegate.proposeVisitIfNavigatedWithAction(r,i),r.src=e.toString()}else this.navigator.proposeVisit(D(e),t)}refresh(e,t){const r=t&&this.recentRequests.has(t),i=e===document.baseURI;!r&&!this.navigator.currentVisit&&i&&this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(ue.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=e}set progressBarDelay(e){O.drive.progressBarDelay=e}get progressBarDelay(){return O.drive.progressBarDelay}set drive(e){O.drive.enabled=e}get drive(){return O.drive.enabled}set formMode(e){O.forms.mode=e}get formMode(){return O.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return S(this,ze)}set pageRefreshDebouncePeriod(e){this.refresh=Er(this.debouncedRefresh.bind(this),e),P(this,ze,e)}shouldPreloadLink(e){const t=e.hasAttribute("data-turbo-method"),r=e.hasAttribute("data-turbo-stream"),i=e.getAttribute("data-turbo-frame"),o=i=="_top"?null:document.getElementById(i)||ve(e,"turbo-frame:not([disabled])");if(t||r||o instanceof z)return!1;{const p=new URL(e.href);return this.elementIsNavigatable(e)&&Q(p,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,r){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:r}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&Q(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&Q(t,this.snapshot.rootLocation)&&this.navigator.linkPrefetchingIsEnabledForLocation(t)}willFollowLinkToLocation(e,t,r){return this.elementIsNavigatable(e)&&Q(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,r)}followedLinkToLocation(e,t){const r=this.getActionForLink(e),i=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:r,acceptsStreamResponse:i})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){ss(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(st(document.documentElement),this.view.markVisitDirection(e.direction)),ss(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),rt(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){const r=Wt(e,t);return this.submissionIsNavigatable(e,t)&&Q(D(r),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){var e;(e=this.navigator.currentVisit)!=null&&e.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){const r=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:i,detail:{render:o}}=r;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!i}viewRenderedSnapshot(e,t,r){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(r)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,r){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,r).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,r){return q("turbo:click",{target:e,detail:{url:t.href,originalEvent:r},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return q("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return q("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return q("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return q("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return q("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return q("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return q("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return q("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(O.forms.mode=="off")return!1;{const r=t?this.elementIsNavigatable(t):!0;return O.forms.mode=="optin"?r&&e.closest('[data-turbo="true"]')!=null:r&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){const t=ve(e,"[data-turbo]"),r=ve(e,"turbo-frame");return O.drive.enabled||r?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return he(e)||"advance"}get snapshot(){return this.view.snapshot}}ze=new WeakMap;function ss(s){Object.defineProperties(s,zi)}const zi={absoluteURL:{get(){return this.toString()}}},F=new Ui(gs),{cache:Bs,navigator:Os}=F;function jt(){F.start()}function Ns(s){F.registerAdapter(s)}function Ds(s,e){F.visit(s,e)}function Kt(s){F.connectStreamSource(s)}function Xt(s){F.disconnectStreamSource(s)}function xs(s){F.renderStreamMessage(s)}function Vs(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),F.clearCache()}function Ws(s){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),O.drive.progressBarDelay=s}function _s(s){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),O.forms.confirm=s}function Us(s){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),O.forms.mode=s}var $i=Object.freeze({__proto__:null,navigator:Os,session:F,cache:Bs,PageRenderer:qt,PageSnapshot:U,FrameRenderer:Ft,fetch:_t,config:O,start:jt,registerAdapter:Ns,visit:Ds,connectStreamSource:Kt,disconnectStreamSource:Xt,renderStreamMessage:xs,clearCache:Vs,setProgressBarDelay:Ws,setConfirmMethod:_s,setFormMode:Us});class ji extends Error{}var Te,j,se,$e,Le,Re,re,pe,gt,zs,bt,$s,vt,js,St,Ks,wt,Xs,yt,Ys,Et,Gs,je,Nt,ie,ge,At,Js,Pe,et,Tt,Qs,Lt,Zs,Rt,er;class Ki{constructor(e){b(this,re);b(this,gt);b(this,bt);b(this,vt);b(this,St);b(this,wt);b(this,yt);b(this,Et);b(this,je);b(this,ie);b(this,At);b(this,Pe);b(this,Tt);b(this,Lt);b(this,Rt);h(this,"fetchResponseLoaded",e=>Promise.resolve());b(this,Te,null);b(this,j,()=>{});b(this,se,!1);b(this,$e,!1);b(this,Le,new Set);b(this,Re,!1);h(this,"action",null);h(this,"visitCachedSnapshot",({element:e})=>{const t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement});this.element=e,this.view=new Gr(this,this.element),this.appearanceObserver=new Or(this,this.element),this.formLinkClickObserver=new Rs(this,this.element),this.linkInterceptor=new Ts(this,this.element),this.restorationIdentifier=ne(),this.formSubmitObserver=new Ut(this,this.element)}connect(){S(this,se)||(P(this,se,!0),this.loadingStyle==ae.lazy?this.appearanceObserver.start():y(this,re,pe).call(this),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){S(this,se)&&(P(this,se,!1),this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==ae.eager&&y(this,re,pe).call(this)}sourceURLChanged(){y(this,Tt,Qs).call(this,"src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==ae.eager||S(this,$e))&&y(this,re,pe).call(this))}sourceURLReloaded(){const{refresh:e,src:t}=this.element;return P(this,Re,t&&e==="morph"),this.element.removeAttribute("complete"),this.element.src=null,this.element.src=t,this.element.loaded}loadingStyleChanged(){this.loadingStyle==ae.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),y(this,re,pe).call(this))}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{const t=await e.responseHTML;if(t){const r=cs(t);U.fromDocument(r).isVisitable?await y(this,gt,zs).call(this,e,r):await y(this,St,Ks).call(this,e)}}finally{P(this,Re,!1),this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,he(e)),y(this,re,pe).call(this)}willSubmitFormLinkToLocation(e){return y(this,Pe,et).call(this,e)}submittedFormLinkToLocation(e,t,r){const i=y(this,ie,ge).call(this,e);i&&r.setAttribute("data-turbo-frame",i.id)}shouldInterceptLinkClick(e,t,r){return y(this,Pe,et).call(this,e)}linkClickIntercepted(e,t){y(this,vt,js).call(this,e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&y(this,Pe,et).call(this,e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new kt(this,e,t);const{fetchRequest:r}=this.formSubmission;this.prepareRequest(r),this.formSubmission.start()}prepareRequest(e){var t;e.headers["Turbo-Frame"]=this.id,(t=this.currentNavigationElement)!=null&&t.hasAttribute("data-turbo-stream")&&e.acceptResponseType(ue.contentType)}requestStarted(e){st(this.element)}requestPreventedHandlingResponse(e,t){S(this,j).call(this)}async requestSucceededWithResponse(e,t){await this.loadResponse(t),S(this,j).call(this)}async requestFailedWithResponse(e,t){await this.loadResponse(t),S(this,j).call(this)}requestErrored(e,t){console.error(t),S(this,j).call(this)}requestFinished(e){rt(this.element)}formSubmissionStarted({formElement:e}){st(e,y(this,ie,ge).call(this,e))}formSubmissionSucceededWithResponse(e,t){const r=y(this,ie,ge).call(this,e.formElement,e.submitter);r.delegate.proposeVisitIfNavigatedWithAction(r,he(e.submitter,e.formElement,r)),r.delegate.loadResponse(t),e.isSafe||F.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),F.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){rt(e,y(this,ie,ge).call(this,e))}allowsImmediateRender({element:e},t){const r=q("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:i,detail:{render:o}}=r;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!i}viewRenderedSnapshot(e,t,r){}preloadOnLoadLinksForView(e){F.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){const r=U.fromElement(e).clone(),{visitCachedSnapshot:i}=e.delegate;e.delegate.fetchResponseLoaded=async o=>{if(e.src){const{statusCode:p,redirected:L}=o,C=await o.responseHTML,B={response:{statusCode:p,redirected:L,responseHTML:C},visitCachedSnapshot:i,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:r};this.action&&(B.action=this.action),F.visit(e.src,B)}}}}changeHistory(){if(this.action){const e=hs(this.action);F.history.update(e,D(this.element.src||""),this.restorationIdentifier)}}async extractForeignFrameElement(e){let t;const r=CSS.escape(this.id);try{if(t=is(e.querySelector(`turbo-frame#${r}`),this.sourceURL),t)return t;if(t=is(e.querySelector(`turbo-frame[src][recurse~=${r}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(i){return console.error(i),new z}return null}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){y(this,Lt,Zs).call(this,"src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||S(this,j).call(this)!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&S(this,se)}get rootLocation(){const e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),t=(e==null?void 0:e.content)??"/";return D(t)}}Te=new WeakMap,j=new WeakMap,se=new WeakMap,$e=new WeakMap,Le=new WeakMap,Re=new WeakMap,re=new WeakSet,pe=async function(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=y(this,bt,$s).call(this,D(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,P(this,$e,!0))},gt=new WeakSet,zs=async function(e,t){const r=await this.extractForeignFrameElement(t.body),i=S(this,Re)?si:Ft;if(r){const o=new It(r),p=new i(this,this.view.snapshot,o,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(p),this.complete=!0,F.frameRendered(e,this.element),F.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else y(this,wt,Xs).call(this,e)&&y(this,yt,Ys).call(this,e)},bt=new WeakSet,$s=async function(e){var r;const t=new Ce(this,_.get,e,new URLSearchParams,this.element);return(r=S(this,Te))==null||r.cancel(),P(this,Te,t),new Promise(i=>{P(this,j,()=>{P(this,j,()=>{}),P(this,Te,null),i()}),t.perform()})},vt=new WeakSet,js=function(e,t,r){const i=y(this,ie,ge).call(this,e,r);i.delegate.proposeVisitIfNavigatedWithAction(i,he(r,e,i)),y(this,Rt,er).call(this,e,()=>{i.src=t})},St=new WeakSet,Ks=async function(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await y(this,je,Nt).call(this,e.response)},wt=new WeakSet,Xs=function(e){this.element.setAttribute("complete","");const t=e.response,r=async(o,p)=>{o instanceof Response?y(this,je,Nt).call(this,o):F.visit(o,p)};return!q("turbo:frame-missing",{target:this.element,detail:{response:t,visit:r},cancelable:!0}).defaultPrevented},yt=new WeakSet,Ys=function(e){this.view.missing(),y(this,Et,Gs).call(this,e)},Et=new WeakSet,Gs=function(e){const t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new ji(t)},je=new WeakSet,Nt=async function(e){const t=new Pt(e),r=await t.responseHTML,{location:i,redirected:o,statusCode:p}=t;return F.visit(i,{response:{redirected:o,statusCode:p,responseHTML:r}})},ie=new WeakSet,ge=function(e,t){const r=tt("data-turbo-frame",t,e)||this.element.getAttribute("target");return rs(r)??this.element},At=new WeakSet,Js=function(e,t){const r=Wt(e,t);return Q(D(r),this.rootLocation)},Pe=new WeakSet,et=function(e,t){const r=tt("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!y(this,At,Js).call(this,e,t)||!this.enabled||r=="_top")return!1;if(r){const i=rs(r);if(i)return!i.disabled}return!(!F.elementIsNavigatable(e)||t&&!F.elementIsNavigatable(t))},Tt=new WeakSet,Qs=function(e){return S(this,Le).has(e)},Lt=new WeakSet,Zs=function(e,t){S(this,Le).add(e),t(),S(this,Le).delete(e)},Rt=new WeakSet,er=function(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement};function rs(s){if(s!=null){const e=document.getElementById(s);if(e instanceof z)return e}}function is(s,e){if(s){const t=s.getAttribute("src");if(t!=null&&e!=null&&Cr(t,e))throw new Error(`Matching <turbo-frame id="${s.id}"> element has a source URL which references itself`);if(s.ownerDocument!==document&&(s=document.importNode(s,!0)),s instanceof z)return s.connectedCallback(),s.disconnectedCallback(),s}}const Yt={after(){this.targetElements.forEach(s=>{var e;return(e=s.parentElement)==null?void 0:e.insertBefore(this.templateContent,s.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.append(this.templateContent))},before(){this.targetElements.forEach(s=>{var e;return(e=s.parentElement)==null?void 0:e.insertBefore(this.templateContent,s)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.prepend(this.templateContent))},remove(){this.targetElements.forEach(s=>s.remove())},replace(){const s=this.getAttribute("method");this.targetElements.forEach(e=>{s==="morph"?$t(e,this.templateContent):e.replaceWith(this.templateContent)})},update(){const s=this.getAttribute("method");this.targetElements.forEach(e=>{s==="morph"?Cs(e,this.templateContent):(e.innerHTML="",e.append(this.templateContent))})},refresh(){F.refresh(this.baseURI,this.requestId)}};var le,ke;const Gt=class Gt extends HTMLElement{constructor(){super(...arguments);b(this,le)}static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){return this.renderPromise??(this.renderPromise=(async()=>{const t=this.beforeRenderEvent;this.dispatchEvent(t)&&(await Ie(),await t.detail.render(this))})())}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(t=>t.remove())}get duplicateChildren(){var i;const t=this.targetElements.flatMap(o=>[...o.children]).filter(o=>!!o.getAttribute("id")),r=[...((i=this.templateContent)==null?void 0:i.children)||[]].filter(o=>!!o.getAttribute("id")).map(o=>o.getAttribute("id"));return t.filter(o=>r.includes(o.getAttribute("id")))}get performAction(){if(this.action){const t=Yt[this.action];if(t)return t;y(this,le,ke).call(this,"unknown action")}y(this,le,ke).call(this,"action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;y(this,le,ke).call(this,"target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const t=this.ownerDocument.createElement("template");return this.appendChild(t),t}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;y(this,le,ke).call(this,"first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:Gt.renderElement}})}get targetElementsById(){var r;const t=(r=this.ownerDocument)==null?void 0:r.getElementById(this.target);return t!==null?[t]:[]}get targetElementsByQuery(){var r;const t=(r=this.ownerDocument)==null?void 0:r.querySelectorAll(this.targets);return t.length!==0?Array.prototype.slice.call(t):[]}};le=new WeakSet,ke=function(t){throw new Error(`${this.description}: ${t}`)};let nt=Gt;class tr extends HTMLElement{constructor(){super(...arguments);h(this,"streamSource",null)}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Kt(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),Xt(this.streamSource))}get src(){return this.getAttribute("src")||""}}z.delegateConstructor=Ki;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",z);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",nt);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",tr);(()=>{let s=document.currentScript;if(s&&!s.hasAttribute("data-turbo-suppress-warning"))for(s=s.parentElement;s;){if(s==document.body)return console.warn(ls`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applicationâs JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ââ
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,s.outerHTML);s=s.parentElement}})();window.Turbo={...$i,StreamActions:Yt};jt();const Yi=Object.freeze(Object.defineProperty({__proto__:null,FetchEnctype:Z,FetchMethod:_,FetchRequest:Ce,FetchResponse:Pt,FrameElement:z,FrameLoadingStyle:ae,FrameRenderer:Ft,PageRenderer:qt,PageSnapshot:U,StreamActions:Yt,StreamElement:nt,StreamSourceElement:tr,cache:Bs,clearCache:Vs,config:O,connectStreamSource:Kt,disconnectStreamSource:Xt,fetch:_t,fetchEnctypeFromString:bs,fetchMethodFromString:Ct,isSafe:Mt,navigator:Os,registerAdapter:Ns,renderStreamMessage:xs,session:F,setConfirmMethod:_s,setFormMode:Us,setProgressBarDelay:Ws,start:jt,visit:Ds},Symbol.toStringTag,{value:"Module"}));F.drive=!1;export{Yi as T};
